<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fourjo.idle.goodgame.gg.repository.AdminRepository">



    <update id="AdminUserUpdate" parameterType="fourjo.idle.goodgame.gg.web.dto.UserDto">
        update user_mst set user_nick=#{userNick}
        where user_index=#{userIndex}
    </update>

    <delete id="AdminUserDelete" parameterType="integer" >
        delete from user_mst where user_index= #{user_index}
    </delete>


    <select id="AdminUserSelectAll"  resultType="fourjo.idle.goodgame.gg.web.dto.UserDto">
      select
        user_index as userIndex,
        user_id as userId,
        user_pw as userPw,
        user_nick as userNick,
        user_gender as userGender,
        user_reg_date as userRegDate,
        user_email as userEmail,
        role_id as roleId
        from user_mst
        where user_index=#{user_index}

    </select>

    <select id="AdminUserSearch"  parameterType="fourjo.idle.goodgame.gg.web.dto.AdminUserSearchDTO" resultType="fourjo.idle.goodgame.gg.web.dto.UserDto">
    select
    user_index as userIndex,
    user_id as userId,
    user_pw as userPw,
    user_nick as userNick,
    user_gender as userGender,
    user_reg_date as userRegDate,
    user_email as userEmail,
    role_id as roleId
    from user_mst
        <if test='searchValue != null and searchValue !=""'>
            where (
            user_id like CONCAT('%', #{searchValue}, '%')
            or user_nick like CONCAT('%', #{searchValue}, '%')
            or user_email like CONCAT('%', #{searchValue}, '%')
            )
        </if>
        order by
        user_index desc
        <if test='limit == "Y"'>
            limit #{index}, #{count}
        </if>

</select>

    <select id="AdminUserSelectOne"  parameterType="integer" resultType="fourjo.idle.goodgame.gg.web.dto.UserDto">
        select
        user_index as userIndex,
        user_id as userId,
        user_pw as userPw,
        user_nick as userNick,
        user_gender as userGender,
        user_reg_date as userRegDate,
        user_email as userEmail,
        role_id as roleId
        from user_mst
        where user_index=#{user_index}

    </select>
</mapper>