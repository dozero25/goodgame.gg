<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fourjo.idle.goodgame.gg.repository.AdminUserRepository">



    <update id="userUpdateUserNickByUserIndex" parameterType="fourjo.idle.goodgame.gg.web.dto.UserDto">
        update user_mst set userNick=#{userNick}
        where userIndex=#{userIndex}
    </update>

    <delete id="userDeleteByUserIndex" parameterType="integer" >
        delete from user_mst where userIndex= #{userIndex}
    </delete>




    <select id="userSearchByUserNickAndEmailAndId"  parameterType="fourjo.idle.goodgame.gg.web.dto.AdminUserSearchDTO" resultType="fourjo.idle.goodgame.gg.web.dto.UserDto">
    select  * from user_mst
        <if test='searchKey=="in" and searchValue != null and searchValue !=""'>
            where (
          userId like CONCAT('%',#{searchValue},'%') or
            userNick like CONCAT('%',#{searchValue},'%')
            )
        </if>
        <if test='searchKey=="i"'>
            where (
          userId like CONCAT('%',#{searchValue},'%')
            )
        </if>
        <if test='searchKey=="n"'>
            where (
          userNick like CONCAT('%',#{searchValue},'%')
            )
        </if>
        <if test='searchKey=="e"'>
            where (
           userEmail like CONCAT('%',#{searchValue},'%')
            )
        </if>
        order by
        userIndex desc
        <if test='limit == "Y"'>
            limit #{index}, #{count}
        </if>

</select>

    <select id="userSelectOneByUserIndex"  parameterType="integer" resultType="fourjo.idle.goodgame.gg.web.dto.UserDto">
        select * from user_mst where userIndex=#{user_index}

    </select>
</mapper>